%
% Result
%

% !TEX root = ../../main.tex
\chapter{Resultate\label{chap:Resultate}}

  Zu den Versuchen 1--3 gibt es keine Bilder der Individuen, da es sonst den Rahmen dieser Arbeit sprengen würde.
  Versuch 4 mit den vielversprechendsten Resultaten ist ausführlich mit Bilder der Individuen dokumentiert.
  Eine Simulation mit 12000 Generationen dauert rund 10 Tage.
  %%vlt in Diskussion disktutieren

  \section{Erster Versuch}

    \subsection{Konfiguration}

      \begin{table}[H]
        \centering
        \input{tables/simulation-parameters-first-run-no-feedback.tex}
        \caption{Simulationsparameter, Erster Versuch}
      \end{table}

    \subsection{Auswertung}

      Es ist ein klarer Aufwärtstrend der Fitness zu erkennen bis etwa zur 1000. Generation (siehe~\vref{fig:graphFirst}).
      Danach ist ein Abfall der Fitness bei den Individuen zu beobachten.
      Die Vermutung dabei ist,
      dass der Parcours zu schwierig ist und die Individuen mit der grossen Steigung nicht mehr zurechtkommen.
      Die Ausreisser sind dadurch zu erklären,
      dass ein bestimmter Parcours sehr einfach für die Individuen zu bewältigen war oder ihnen Schwierigkeiten bereitet hat.
      Es wird vermutet, dass des Feedbacksystems der Steuerung hier helfen wird.
      Ausserdem müssen die Parameter des Parcours für die nächste Simulation anders konfiguriert werden.
      Der Steigungszuwachs sollte auf 0.01 limitiert werden und der Zuwachs des höchsten Punktes
      sollte auf 0.02 gesetzt werden.

      % TODO warum diese werte?

      \begin{figure}
        \centering
        \input{graphics/fitness-graph-first-run-no-feedback}
        \caption{Bestes Individuum und durchschnittliches Individuum, erster Versuch\label{fig:graphFirst}}
      \end{figure}

      \subsubsection{Körperpunkte\label{subsub:bp}}

        Die Auswertung der Individuen nach der Anzahl ihrer Körperpunkte ist ernüchternd (siehe~\vref{fig:graphBpFirst}).

        % TODO referenz auf 2. versuch?

        Bereits ab der 14. Generation existieren nur noch Individuen mit vier Körperpunkten.
        Vielleicht ist dies ebenfalls auf das fehlende Feedback zurückzuführen.
        Im besten Fall wurden die Individuen mit mehr als vier Körperpunkten der initialen Population unvorteilhaft generiert.
        Eine weitere Simulation wird zeigen,
        ob vier Körperpunkten am geeignetsten sind für die Bewältigung der Problemstellung,
        oder ob es sich um einen \gls{FrozenAccident} handelt.

        % TODO glossar frozen accident

        \begin{figure}[H]
          \centering
          \input{graphics/fitness-graph-average-body-points-first-run-no-feedback}
          \caption{Durchschnittliches Individuum pro Anzahl Körperpunkte, erster Versuch\label{fig:graphBpFirst}}
        \end{figure}

  \section{Zweiter Versuch}

    \subsection{Konfiguration}

      \begin{table}[H]
        \centering
        \input{tables/simulation-parameters-second-run-no-feedback.tex}
        \caption{Simulationsparameter, zweiter Versuch}
      \end{table}

    \subsection{Auswertung\label{sub:scndAuswertung}}

      Beim zweiten Versuch ist interessant zu beobachten,
      dass die Fitness der Individuen erst ab der 1400\@. Generation (siehe~\vref{fig:graphSecond})
      wieder abzunehmen beginnt.
      Jedoch ist auch hier ein klarer, wenn auch nicht so starker Abwärtstrend zu erkennen.
      Eine weitere Vermutung, neben dem fehlenden Feedback der Engine, warum die Fitness wieder abzunehmen beginnt,
      ist die zu hohe Wahrscheinlichkeit der Mutation.
      In einem nächsten Versuch muss getestet werden,
      ob niedrigere Mutationswahrscheinlichkeiten einen positiven Effekt auf die langfristige Fitness der Individuen haben.
      Ab ca\@. der 2000\@. Generation beginnt die Fitness wieder rapide zu steigen,
      jedoch ist dies durch einen Fehler der \gls{PhysicsEngine} zu erklären.
      Die Individuen verhaken sich im Boden und beginnen grosse Distanzen durch Hüpfbewegungen zurückzulegen.
      Dieser Fehler kann bereinigt werden indem die Relaxation erhöht und gleichzeitig der Zeitschritt verringert wird,
      diese Parameter sind in~\vref{sec:Konfiguration} beschrieben.

      \begin{figure}[H]
        \centering
        \input{graphics/fitness-graph-second-run-no-feedback}
        \caption{Bestes Individuum und Durchschnittliches Individuum, zweiter Versuch\label{fig:graphSecond}}
      \end{figure}

      \subsubsection{Körperpunkte\label{subsub:bpScnd}}

        Ein ähnliches Bild ist zu beobachten, wie bei~\vref{subsub:bp}.
        Bereits ab der 9\@. Generation existieren nur noch Individuen mit 7 Körperpunkten (siehe~\vref{fig:graphBpSecond}).
        Dieses Phänomen kann als evolutionary frozen Accident bezeichnet werden.

        % TODO forzen accident

        Damit eine Aussage über den Einfluss der Körperpunkte getroffen werden kann,
        müsste während der ganzen Simulation die Anzahl der Körperpunkte mutiert werden.
        Stattdessen wird momentan nur zu Beginn der Simulation die Anzahl der Körperpunkte für die Individuen festgelegt.

        \begin{figure}[H]
          \centering
          \input{graphics/fitness-graph-average-body-points-second-run-no-feedback}
          \caption{Durchschnittliches Individuum pro Anzahl Körperpunkte, zweiter Versuch\label{fig:graphBpSecond}}
        \end{figure}

  \section{Dritter Versuch}

    \subsection{Konfiguration}

      \begin{table}[H]
        \centering
        \input{tables/simulation-parameters-third-run.tex}
        \caption{Simulationsparameter, dritter Versuch\label{tbl:thirdRunConf}}
      \end{table}

      Die Implementation des Feedbacks musste leider wegen mangelnder Zeit eingestellt werden.
      In dieser Version ist die detaillierte Konfiguration der Mutation verfügbar.
      Die Konfigurationstabelle~(\vref{tbl:thirdRunConf}) stellt die erweiterten Einstellungsmöglichkeiten dar.

    \subsection{Auswertung\label{sub:thirdAuswertung}}

      Leider dauert es mit dieser Version der Applikation sehr lange eine Generation zu evolvieren.
      Der Grund dafür ist einerseits die ineffiziente Mutation der Individuen.
      Andererseits ist die Wahrscheinlichkeit eine neue Bewegung hinzuzufügen grösser, als eine Bewegung zu entfernen.
      Die Datenstrukturen wachsen, da mehr Bewegungen hinzukommen als entfernt werden,
      was wiederum den Rechenaufwand erhöht.
      Darum wird dieser Versuch nach ca. 1200 Generationen abgebrochen,
      damit Geschwindigkeits-Optimierungen implementiert werden können und die Wahrscheinlichkeit anders konfiguriert werden kann.
      \\
      Die Individuen haben bei diesem Versuch eine Art rollende Bewegung entwickelt.
      Sie können die guten Fitnesswerte halten,
      obwohl der Parcours schwerer wird (siehe~\vref{fig:graphThird}).

      \begin{figure}[H]
        \centering
        \input{graphics/fitness-graph-third-run}
        \caption{Bestes Individuum und durchschnittliches Individuum, dritter Versuch\label{fig:graphThird}}
      \end{figure}

      \subsubsection{Körperpunkte}

        Auf eine Diskussion der Körperpunkte wird verzichtet.

        % TODO weshalb?

        Die notwendigen Schritte für eine sinnvolle Evaluation wurden unter~\vref{subsub:bpScnd} beschrieben.

      \subsubsection{Diversität}

        Ab diesem Lauf ist der Diversitätsreport verfügbar. % TODO umformulieren
        \\
        Wie in~\vref{fig:graphDivThird} zu sehen ist, bewegt sich die Diversität kurz auf einem hohen Niveau,
        da am Anfang alles völlig zufällig generiert wird.
        Die Turnier-basierte-Selektion bevorzugt Individuen mit einer grossen Fitness,
        deshalb sinkt die Diversität nach der Selektion.
        Darum ist kurz nach Beginn der Simulation ein starker Abfall der Diversität zu beobachten.
        \\
        Interessant zu beobachten ist, dass die Diversität ab der 400. Generation wieder zu steigen beginnt.
        Die Vermutung dabei ist, dass sich mehr verschiedene Individuen mit einer guten Fitness finden lassen.

        \begin{figure}[H]
          \centering
          \input{graphics/diversity-graph-third-run}
          \caption{Diversität pro Generation, dritter Versuch\label{fig:graphDivThird}}
        \end{figure}

  \section{Vierter Versuch}

    \subsection{Konfiguration}

      \begin{table}[H]
        \centering
        \input{tables/simulation-parameters-forth-run.tex}
        \caption{Simulationsparameter, vierter Versuch\label{tbl:forthRunConf}}
      \end{table}

      Wie in~\vref{sub:thirdAuswertung} erwähnt,
      wurde die Wahrscheinlichkeit Bewegungen hinzuzufügen oder zu entfernen gleichgesetzt.

      % TODO das führt zu?

    \subsection{Auswertung}

      \begin{figure}[H]
        \centering
        \input{graphics/fitness-graph-fourth-run}
        \caption{Bestes Individuum und durchschnittliches Individuum, vierter Versuch\label{fig:graphFourth}}
      \end{figure}

      \subsubsection{200. Generation}

        Wie in~\vref{fig:gen200} erkennbar, haben sich die Individuen zu einer Art Rolle entwickelt.
        Diese Art von Fortbewegung ist nicht optimal und setzt sich fort bis etwa zur 3000. Generation.

        % TODO warum nicht?

        \vspace{0.5cm}

        \begin{figure}[H]
          \centering
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen200_1}
            \caption{\label{fig:gen200_1}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen200_2}
            \caption{\label{fig:gen200_2}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen200_3}
            \caption{\label{fig:gen200_3}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen200_4}
            \caption{\label{fig:gen200_4}}
          \end{subfigure}
          \caption{200. Generation\label{fig:gen200}}
        \end{figure}

      \subsubsection{3000. Generation}

        Ab der 3000. Generation haben die Individuen eine Hüpf-Bewegung entwickelt.
        Sie fixieren alle Beine ausser eines, welches sie benutzen um sich vom Boden abzustossen~(\vref{fig:gen3000}).
        Diese Art von Fortbewegung bringt eine bessere Fitness hervor, wie in~\vref{fig:graphFourth} erkennbar ist.
        Im Gegensatz zu den Individuen in~\vref{sub:scndAuswertung} ist dies jedoch eine valide Hüpfbewegung.
        \\ % TODO warum nun valid?
        Das Herabsetzten der Mutationswahrscheinlichkeiten~(Hypothese in~\vref{subsub:hypoMut}) hat langfristig einen positiven Effekt auf die Fitness,
        wie in~\vref{fig:graphFourth} im Vergleich zu~\vref{fig:graphFirst} erkennbar ist.

        \vspace{0.5cm}

        \begin{figure}[H]
          \centering
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen3000_1}
            \caption{\label{fig:gen3000_1}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen3000_2}
            \caption{\label{fig:gen3000_2}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen3000_3}
            \caption{\label{fig:gen3000_3}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen3000_4}
            \caption{\label{fig:gen3000_4}}
          \end{subfigure}
          \caption{3000. Generation\label{fig:gen3000}}
        \end{figure}

      \subsubsection{7000. Generation}

        Mit zunehmender Schwierigkeit des Parcours scheint das Hüpfen nicht mehr die richtige Art von Fortbewegung zu sein.
        Die Individuen bleiben häufig in Bergen und Tälern stecken~(\vref{fig:gen7000}).

        \vspace{0.5cm}

        \begin{figure}[H]
          \centering
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen7000_1}
            \caption{\label{fig:gen7000_1}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen7000_2}
            \caption{\label{fig:gen7000_2}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen7000_3}
            \caption{\label{fig:gen7000_3}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen7000_4}
            \caption{\label{fig:gen7000_4}}
          \end{subfigure}
          \caption{7000. Generation\label{fig:gen7000}}
        \end{figure}

      \subsubsection{11000. Generation}

        Die Individuen haben sich zu Rudern entwickelt wie in~\vref{fig:gen11000} zu sehen ist.
        Die Masse der anderen Beinpaare, welche nicht für die Ruderbewegung gebraucht werden,
        ist sichtbar kleiner geworden.
        Bei der Analyse dieser Generation ist ein Fehler aufgefallen.
        Die Individuen werden nach 4 Sekunden entfernt,
        wenn sie während dessen sich nicht um einen bestimmten Wert in X-Richtung fortbewegen.
        Der Wert sollte allerdings höher gewählt werden,
        da es in späteren Generationen und zunehmender Parcours-Schwierigkeit sein kann,
        dass die Individuen sich lange an einer Stelle aufhalten, um einen Berg zu erklimmen.
        Um diese Vermutung zu validieren,
        wird die Endpopulation aus dem 4. Lauf im 6. Lauf~(\vref{sec:sixthSimulation}) weiter evolviert.

        %%\vspace{0.5cm} nicht nötig hier

        \begin{figure}[H]
          \centering
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen11000_1}
            \caption{\label{fig:gen11000_1}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen11000_2}
            \caption{\label{fig:gen11000_2}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen11000_3}
            \caption{\label{fig:gen11000_3}}
          \end{subfigure}
          \begin{subfigure}[b]{0.45\textwidth}
            \includegraphics[width=\linewidth,center]{graphics/simulation-results/4_gen11000_4}
            \caption{\label{fig:gen11000_4}}
          \end{subfigure}
          \caption{11000. Generation\label{fig:gen11000}}
        \end{figure}

      \subsubsection{Körperpunkte}

        Auf eine Diskussion der Körperpunkte wird verzichtet.
        Die notwendigen Schritte für eine sinnvolle Evaluation wurden unter~\vref{subsub:bpScnd} beschrieben.

      \subsubsection{Diversität}

        Der Einbruch ab ca.\ der 3000. Generation, lässt sich damit erklären, dass die Hüpfer gefunden worden sind.
        Die Diversität konnte sich steigern im Vergleich zum Anfang der Simulation und spricht für die Turnierbasierte-Selektion.

        \begin{figure}[H]
          \centering
          \input{graphics/diversity-graph-fourth-run}
          \caption{Diversität pro Generation, vierter Versuch\label{fig:graphDivFourth}}
        \end{figure}

  \section{Fünfter Versuch}

    \subsection{Konfiguration}

      \begin{table}[H]
        \centering
        \input{tables/simulation-parameters-fifth-run.tex}
        \caption{Simulationsparameter, fünfter Versuch}
      \end{table}

      Das Ziel dieser Simulation ist das Evolvieren auf Evolvierbarkeit,
      um einen Vergleich zur allgemeinen Lösung zu ziehen.
      Darum wurde das Ziel der Konfiguration modifiziert, um das Evolvieren auf Evolvierbarkeit zu erreichen.

    \subsection{Auswertung\label{sub:fifthAuswertung}}

      Der Graph in~\vref{fig:graphFifth} schläger weniger aus im Vergleich zu~\vref{fig:graphForth}.
      Dies zu erklären, das beim evolvieren auf Evolvierbarkeit, der Parcour erst nach 100
      Generationen ausgewechselt wird und somit die Fitnesswerte weniger pro Generation schwanken.
      Die Ausreisser (lokale Minima und Maxima) treten dann auf, wenn der Parcour gewechselt wird.

      \begin{figure}[H]
        \centering
        \input{graphics/fitness-graph-fifth-run}
        \caption{Bestes Individuum und durchschnittliches Individuum, fünfter Versuch\label{fig:graphFifth}}
      \end{figure}

      \subsubsection{Diversität}

        Die Diversität~(\vref{fig:graphDivFifth}) ist im Vergleich zum 4. Versuch~(\vref{fig:graphDivFourth}) deutlich niedriger.
        Die allgemeine Lösung erlaubt es diversere Individuen zu finden.

        \begin{figure}[H]
          \centering
          \input{graphics/diversity-graph-fifth-run}
          \caption{Diversität pro Generation, Fünfter Versuch\label{fig:graphDivFifth}}
        \end{figure}

  \section{Sechster Versuch, Fortsetzung Lauf 4\label{sec:sixthSimulation}}
